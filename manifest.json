{
  "id": "rivestream-simple-test",
  "name": "Rivestream (Simple Test)",
  "version": "1.0.0",
  "manifestURI": "https://raw.githubusercontent.com/Farqiplier/MyTestExtension/refs/heads/main/manifest.json",
  "language": "javascript",
  "type": "onlinestream-provider",
  "description": "Simple Rivestream test provider",
  "author": "Farqiplier",
  "lang": "en",
  "payload": "/// <reference path=\"./online-streaming-provider.d.ts\" />\n\nclass Provider {\n  constructor() {\n    this.tmdbApiKey = \"963152cd5dd145cfa7496a5e975139e9\";\n  }\n\n  getSettings() {\n    return {\n      episodeServers: [\"Rivestream\"],\n      supportsDub: false,\n    };\n  }\n\n  async search(query) {\n    console.log(\"[Simple Test] Search:\", JSON.stringify(query.media.title));\n    \n    const title = query.media.title.english || query.media.title.romaji;\n    const year = query.media.seasonYear;\n    const isMovie = query.media.format === \"MOVIE\";\n    const mediaType = isMovie ? \"movie\" : \"tv\";\n    \n    // Search TMDB\n    const searchUrl = `https://api.themoviedb.org/3/search/${mediaType}?api_key=${this.tmdbApiKey}&query=${encodeURIComponent(title)}&year=${year || \"\"}`;\n    const response = await fetch(searchUrl);\n    const data = await response.json();\n    \n    if (!data.results || data.results.length === 0) {\n      console.log(\"[Simple Test] No TMDB results\");\n      return [];\n    }\n    \n    const tmdbId = data.results[0].id;\n    console.log(`[Simple Test] Found TMDB ID: ${tmdbId}`);\n    \n    return [{\n      id: `${tmdbId}/${mediaType}`,\n      title: title,\n      url: `https://www.themoviedb.org/${mediaType}/${tmdbId}`,\n      subOrDub: \"sub\",\n    }];\n  }\n\n  async findEpisodes(Id) {\n    console.log(`[Simple Test] findEpisodes: ${Id}`);\n    \n    const [tmdbId, mediaType] = Id.split(\"/\");\n    \n    if (mediaType === \"movie\") {\n      return [{ id: Id, number: 1, title: \"Movie\", url: \"\" }];\n    }\n    \n    // For TV, just return 12 episodes as test\n    const episodes = [];\n    for (let i = 1; i <= 12; i++) {\n      episodes.push({\n        id: `${Id}/1/${i}`,\n        number: i,\n        title: `Episode ${i}`,\n        url: \"\",\n      });\n    }\n    return episodes;\n  }\n\n  async findEpisodeServer(episode, server) {\n    console.log(`[Simple Test] findEpisodeServer: ${episode.id}`);\n    \n    const parts = episode.id.split(\"/\");\n    const tmdbId = parts[0];\n    const mediaType = parts[1];\n    \n    let embedUrl;\n    if (mediaType === \"movie\") {\n      embedUrl = `https://rivestream.lol/e/?tmdb=${tmdbId}&type=movie`;\n    } else {\n      const season = parts[2] || 1;\n      const ep = parts[3] || episode.number;\n      embedUrl = `https://rivestream.lol/e/?tmdb=${tmdbId}&type=tv&s=${season}&e=${ep}`;\n    }\n    \n    console.log(`[Simple Test] Embed URL: ${embedUrl}`);\n    \n    return {\n      server: server,\n      headers: {\n        \"Referer\": \"https://rivestream.lol/\",\n      },\n      videoSources: [{\n        url: embedUrl,\n        type: \"iframe\",\n        quality: \"auto\",\n        subtitles: [],\n      }],\n    };\n  }\n}"
}
